<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Five Nights at Paulão - Foxy Style Jumpscare</title>
<style>
    /* --- CSS: VISUAL E ESTILO --- */
    body {
        margin: 0;
        background: #000;
        overflow: hidden;
        font-family: 'Courier New', Courier, monospace;
        user-select: none;
    }

    /* O EFEITO 3D PANORÂMICO */
    #game-view {
        width: 100vw;
        height: 100vh;
        position: relative;
        overflow: hidden;
    }

    #office-layer {
        position: absolute;
        top: 0;
        left: 0;
        width: 130%; 
        height: 100%;
        background-image: url('office_bg.png');
        background-size: cover;
        background-position: center;
        transition: transform 0.1s linear;
    }

    /* CONTROLES DAS PORTAS */
    .door-panel {
        position: absolute;
        top: 40%;
        width: 60px;
        height: 150px;
        background: #333;
        border: 2px solid #555;
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: center;
        z-index: 10;
        box-shadow: inset 0 0 10px #000;
    }
    .panel-left { left: 0; border-right: none; border-radius: 0 10px 10px 0; }
    .panel-right { right: 0; border-left: none; border-radius: 10px 0 0 10px; }

    .btn {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        border: 3px solid #222;
        font-size: 10px;
        display: flex; align-items: center; justify-content: center; font-weight: bold;
        transition: 0.1s;
    }
    .btn-door { background: #500; color: white; }
    .btn-light { background: #ccc; color: black; }
    
    .btn-door.active { background: #0f0; box-shadow: 0 0 15px #0f0; }
    .btn-light.active { background: #ff0; box-shadow: 0 0 15px #ff0; }

    /* PORTAS VISUAIS */
    .heavy-door {
        position: absolute;
        top: 0;
        width: 18%; 
        height: 100%;
        background: repeating-linear-gradient(90deg, #111, #222 10px, #111 20px);
        border-right: 5px solid #000;
        transition: transform 0.2s ease-in;
        z-index: 5;
    }
    #door-l { left: 0; transform: translateY(-100%); border-right: 5px solid #000; }
    #door-r { right: 0; transform: translateY(-100%); border-left: 5px solid #000; }
    
    .closed { transform: translateY(0) !important; }

    /* LUZES NAS PORTAS */
    .door-void {
        position: absolute;
        top: 0;
        width: 20%;
        height: 100%;
        background: black;
        opacity: 0.6; 
        z-index: 4;
        transition: opacity 0.1s;
    }
    #void-l { left: 0; }
    #void-r { right: 0; }

    /* SISTEMA DE CÂMERAS */
    #monitor-btn {
        position: absolute;
        bottom: 20px;
        right: 30%;
        width: 40%;
        height: 30px;
        background: rgba(255,255,255,0.1);
        border: 1px solid white;
        color: white;
        text-align: center;
        line-height: 30px;
        cursor: pointer;
        z-index: 100; 
        font-weight: bold;
        transition: background 0.3s;
    }
    #monitor-btn:hover { background: rgba(255,255,255,0.3); }
    #monitor-btn.monitor-open { background: rgba(255,255,255,0.5); border-color: #0f0; color: #0f0; }

    #cctv-layer {
        display: none;
        position: absolute;
        top: 0; left: 0; width: 100vw; height: 100vh;
        background: #000;
        z-index: 50; 
        border: 5px solid #333;
    }
    
    #cctv-feed {
        width: 100%; height: 100%;
        background-color: #111;
        background-size: cover; 
        background-position: center;
        position: relative;
    }
    
    /* Paulão aparecendo na câmera */
    #paulao-cam-overlay {
        display: none;
        position: absolute;
        top: 20%; left: 30%;
        height: 60%;
        filter: grayscale(0.8) contrast(1.2);
    }

    .scanlines {
        position: absolute; top:0; left:0; width:100%; height:100%;
        background: repeating-linear-gradient(0deg, rgba(0,0,0,0.2), rgba(0,0,0,0.2) 1px, transparent 2px, transparent 4px);
        pointer-events: none;
        z-index: 55;
    }

    #map-ui {
        position: absolute;
        bottom: 60px; right: 50px;
        width: 250px; height: 180px;
        background-image: url('map.png'); 
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        z-index: 60;
    }
    
    .cam-btn {
        width: 45px; height: 25px;
        background: #222; color: #fff;
        border: 1px solid #555;
        position: absolute;
        cursor: pointer;
        font-size: 10px;
        opacity: 0.7;
    }
    .cam-btn:hover { opacity: 1; }
    .cam-btn.active { background: #0f0; color: black; animation: blink-btn 1s infinite; }

    #btn-1a { top: 10px; left: 90px; } 
    #btn-1b { top: 50px; left: 50px; } 
    #btn-2a { top: 90px; left: 90px; } 
    #btn-3  { top: 50px; right: 40px; } 
    #btn-4  { bottom: 20px; right: 80px; } 

    /* PAULÃO NA PORTA (IDLE) */
    #paulao-sprite {
        position: absolute;
        display: none;
        width: 300px; 
        bottom: 0;
        z-index: 4;
        filter: brightness(0.2);
        transition: filter 0.1s;
    }
    .paulao-door-l { left: 12%; display: block !important; }
    .paulao-door-r { right: 12%; display: block !important; }

    /* --- NOVO JUMPSCARE ESTILO FOXY --- */
    #paulao-attack {
        display: none;
        position: absolute;
        left: 0; /* Cola na esquerda */
        bottom: 0;
        height: 100vh; /* Ocupa altura toda */
        width: 60vw; /* Ocupa um pouco mais da metade da tela */
        object-fit: cover;
        z-index: 200; /* Em cima de tudo */
        /* Animação frenética de tremedeira */
        animation: foxy-shake 0.15s infinite;
        filter: contrast(1.5) brightness(0.8);
        border-right: 5px solid black; /* Borda pra parecer que sai da porta */
    }

    @keyframes foxy-shake {
        0% { transform: translateX(0) scale(1); }
        25% { transform: translateX(15px) scale(1.02); }
        50% { transform: translateX(5px) scale(1.05); }
        75% { transform: translateX(20px) scale(1.02); }
        100% { transform: translateX(0) scale(1); }
    }

    /* TELA DE GAME OVER FINAL (Estática) */
    #static-screen {
        display: none;
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: url('https://media.giphy.com/media/oEI9uBYSzLpBK/giphy.gif'); /* Gif de estática */
        background-size: cover;
        z-index: 300;
        opacity: 0.8;
    }
    #game-over-txt {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        color: red; font-size: 3rem; font-weight: bold; display: none; z-index: 301;
    }

    /* HUD */
    #hud {
        position: absolute;
        bottom: 20px; left: 20px;
        color: white; font-size: 1.2rem;
        z-index: 20;
        text-shadow: 1px 1px 0 #000;
    }
    .battery-bar {
        display: inline-block;
        width: 15px; height: 25px;
        background: #0f0; margin-right: 3px; border: 1px solid #fff;
    }
</style>
</head>
<body>

<audio id="sfx-scare" src="scare.mp3"></audio> 
<audio id="sfx-ambience" src="ambience.mp3" loop></audio>

<img id="paulao-attack" src="paulao_susto.png">

<div id="static-screen"></div>
<div id="game-over-txt">GAME OVER</div>

<div id="game-view">
    <div id="office-layer">
        <div id="void-l" class="door-void"></div>
        <div id="void-r" class="door-void"></div>
        <img id="paulao-sprite" src="paulao.png">
    </div>

    <div id="door-l" class="heavy-door"></div>
    <div id="door-r" class="heavy-door"></div>

    <div class="door-panel panel-left">
        <div class="btn btn-door" onclick="toggleDoor('left', this)">DOOR</div>
        <div class="btn btn-light" onmousedown="light('left', true)" onmouseup="light('left', false)">LIGHT</div>
    </div>

    <div class="door-panel panel-right">
        <div class="btn btn-door" onclick="toggleDoor('right', this)">DOOR</div>
        <div class="btn btn-light" onmousedown="light('right', true)" onmouseup="light('right', false)">LIGHT</div>
    </div>

    <div id="hud">
        <div id="power">Power left: <span id="power-val">100</span>%</div>
        <div id="usage">Usage: <span id="usage-bars"></span></div>
        <div style="position: fixed; top: 20px; right: 20px; font-size: 2rem;">12 AM <br> <span style="font-size:1rem">Night 1</span></div>
    </div>

    <div id="monitor-btn" onclick="toggleMonitor()"> < MONITOR > </div>

    <div id="cctv-layer">
        <div class="scanlines"></div>
        <div id="cctv-feed">
            <img id="paulao-cam-overlay" src="paulao.png">
        </div> 
        <div style="position: absolute; top: 30px; left: 30px; color: white; font-size: 1.5rem; animation: blink 1s infinite;">● REC</div>
        <div style="position: absolute; top: 30px; right: 30px; color: white; font-size: 1.5rem;" id="cam-name">CAM 1A</div>
        
        <div id="map-ui">
            <button id="btn-1a" class="cam-btn active" onclick="switchCam('1A')">CAM 1A</button>
            <button id="btn-1b" class="cam-btn" onclick="switchCam('1B')">CAM 1B</button>
            <button id="btn-2a" class="cam-btn" onclick="switchCam('2A')">CAM 2A</button>
            <button id="btn-3"  class="cam-btn" onclick="switchCam('3')">CAM 3</button>
            <button id="btn-4"  class="cam-btn" onclick="switchCam('4')">CAM 4</button>
        </div>
    </div>
</div>

<script>
    /* --- LÓGICA DO JOGO --- */

    const state = {
        power: 100,
        doorL: false, doorR: false,
        lightL: false, lightR: false,
        cameraActive: false,
        currentCam: '1A',
        paulaoLocation: '1A', 
        gameOver: false
    };

    const camImages = {
        '1A': 'cam1.jpg',
        '1B': 'cam2.jpg',
        '2A': 'cam2.jpg',
        '3':  'cam3.jpg',
        '4':  'cam4.jpg'
    };

    let aiTimer = null;
    let powerTimer = null;

    const officeLayer = document.getElementById('office-layer');
    document.addEventListener('mousemove', (e) => {
        if(state.cameraActive || state.gameOver) return;
        let width = window.innerWidth;
        let mouseX = e.clientX;
        let percent = mouseX / width;
        let moveX = percent * 20; 
        officeLayer.style.transform = `translateX(-${moveX}%)`;
    });

    function toggleDoor(side, btn) {
        if(state.power <= 0 || state.gameOver) return;
        let door = document.getElementById(side === 'left' ? 'door-l' : 'door-r');
        if(side === 'left') {
            state.doorL = !state.doorL;
            door.classList.toggle('closed');
        } else {
            state.doorR = !state.doorR;
            door.classList.toggle('closed');
        }
        btn.classList.toggle('active');
        updateUsage();
    }

    function light(side, on) {
        if(state.power <= 0 || state.gameOver) return;
        const voidArea = document.getElementById(side === 'left' ? 'void-l' : 'void-r');
        const paulaoSprite = document.getElementById('paulao-sprite');
        
        if (on) {
            voidArea.style.opacity = '0'; 
            if (side === 'left' && state.paulaoLocation === 'DoorL') {
                paulaoSprite.className = 'paulao-door-l';
                paulaoSprite.style.filter = 'brightness(1)'; 
            } else if (side === 'right' && state.paulaoLocation === 'DoorR') {
                paulaoSprite.className = 'paulao-door-r';
                paulaoSprite.style.filter = 'brightness(1)';
            } else {
                paulaoSprite.className = ''; 
            }
        } else {
            voidArea.style.opacity = '0.6'; 
            paulaoSprite.className = ''; 
            paulaoSprite.style.filter = 'brightness(0.2)';
        }
        updateUsage();
    }

    function toggleMonitor() {
        if(state.power <= 0 || state.gameOver) return;
        state.cameraActive = !state.cameraActive;
        const cctv = document.getElementById('cctv-layer');
        const btn = document.getElementById('monitor-btn');
        if(state.cameraActive) {
            cctv.style.display = 'block';
            btn.classList.add('monitor-open');
            switchCam(state.currentCam); 
        } else {
            cctv.style.display = 'none';
            btn.classList.remove('monitor-open');
        }
        updateUsage();
    }

    function switchCam(camID) {
        state.currentCam = camID;
        document.getElementById('cam-name').innerText = "CAM " + camID;
        const feed = document.getElementById('cctv-feed');
        let bgImage = camImages[camID] ? camImages[camID] : 'cam1.jpg';
        feed.style.backgroundImage = `url('${bgImage}')`;

        const overlay = document.getElementById('paulao-cam-overlay');
        if(state.paulaoLocation === camID) {
            overlay.style.display = 'block';
            if(camID === '1A') overlay.style.left = '30%'; 
            else if(camID === '3') overlay.style.left = '60%'; 
            else overlay.style.left = '40%';
        } else {
            overlay.style.display = 'none';
        }

        document.querySelectorAll('.cam-btn').forEach(b => b.classList.remove('active'));
        let btnId = "btn-" + camID.toLowerCase();
        let btn = document.getElementById(btnId);
        if(btn) btn.classList.add('active');
    }

    function updateUsage() {
        let usage = 1; 
        if(state.doorL) usage++;
        if(state.doorR) usage++;
        if(state.cameraActive) usage++;
        
        let bars = "";
        for(let i=0; i<usage; i++) {
            let color = i > 3 ? 'red' : '#0f0'; 
            bars += `<div class='battery-bar' style='background:${color}'></div>`;
        }
        document.getElementById('usage-bars').innerHTML = bars;
        return usage;
    }

    function startGame() {
        powerTimer = setInterval(() => {
            if(state.gameOver) return;
            let drain = updateUsage() * 0.2; 
            state.power -= drain;
            if(state.power < 0) state.power = 0;
            document.getElementById('power-val').innerText = Math.floor(state.power);
            if(state.power <= 0) blackout();
        }, 1000);

        aiTimer = setInterval(() => {
            if(state.gameOver || state.power <= 0) return;
            if(Math.random() * 20 < 10) { 
                movePaulao();
            }
        }, 3500);
    }

    function movePaulao() {
        const path = ['1A', '1B', '3', '4', '2A', 'DoorL', 'Office'];
        let currentIndex = path.indexOf(state.paulaoLocation);

        if(currentIndex === -1) currentIndex = 0;
        let nextLoc = path[currentIndex + 1];

        if (nextLoc === 'Office') {
            if(state.doorL) {
                console.log("Paulão bateu na porta!");
                state.paulaoLocation = '1A'; 
            } else {
                state.paulaoLocation = 'Office';
                triggerJumpscare();
            }
        } else {
            state.paulaoLocation = nextLoc;
        }
        if(state.cameraActive) switchCam(state.currentCam);
    }

    function blackout() {
        state.doorL = false; state.doorR = false;
        state.cameraActive = false;
        document.getElementById('cctv-layer').style.display = 'none';
        document.getElementById('office-layer').style.backgroundImage = 'none';
        document.getElementById('office-layer').style.backgroundColor = '#000'; 
        document.getElementById('hud').style.display = 'none';
        setTimeout(triggerJumpscare, 5000);
    }

    // --- NOVA FUNÇÃO DE JUMPSCARE (Estilo Foxy) ---
    function triggerJumpscare() {
        if(state.gameOver) return;
        state.gameOver = true;
        
        // Para os timers
        clearInterval(powerTimer);
        clearInterval(aiTimer);

        // Força fechar o monitor se estiver aberto
        const cctv = document.getElementById('cctv-layer');
        cctv.style.display = 'none';
        
        // Toca o grito
        document.getElementById('sfx-scare').play().catch(e => console.log("Audio needs interaction"));

        // MOSTRA O SUSTO DO FOXY (Esquerda)
        const attackImg = document.getElementById('paulao-attack');
        attackImg.style.display = 'block';

        // Depois de 2 segundos, tela de estática
        setTimeout(() => {
            attackImg.style.display = 'none';
            document.getElementById('static-screen').style.display = 'block';
            document.getElementById('game-over-txt').style.display = 'block';
        }, 3000);
        
        // Recarrega depois de 8 segs
        setTimeout(() => {
            location.reload();
        }, 8000);
    }

    startGame();

</script>
</body>
</html>