<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Five Nights at Paulão - 3D Buttons & Doors (Fixed)</title>
<style>
    /* --- CSS GERAL --- */
    body { margin: 0; background: #000; overflow: hidden; font-family: 'Courier New', Courier, monospace; user-select: none; color: white; }

    /* --- MENU --- */
    #main-menu { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: black; z-index: 1000; overflow: hidden; }
    #static-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.4; z-index: 1000; animation: static-loop 0.3s steps(1) infinite; }
    @keyframes static-loop {
        0% { background-image: url('staticpngs/1.png'); } 12.5% { background-image: url('staticpngs/2.png'); } 25% { background-image: url('staticpngs/3.png'); } 37.5% { background-image: url('staticpngs/4.png'); } 50% { background-image: url('staticpngs/5.png'); } 62.5% { background-image: url('staticpngs/6.png'); } 75% { background-image: url('staticpngs/7.png'); } 87.5% { background-image: url('staticpngs/8.png'); } 100% { background-image: url('staticpngs/1.png'); }
    }
    #menu-paulao { position: absolute; right: 0; bottom: 0; height: 100vh; width: auto; max-width: 60vw; object-fit: cover; z-index: 1001; filter: brightness(0.5) contrast(1.3) sepia(0.3); pointer-events: none; }
    #menu-content { position: absolute; top: 15%; left: 10%; z-index: 1002; display: flex; flex-direction: column; }
    #game-title { font-size: 4rem; font-weight: bold; text-shadow: 4px 4px 0px #500; margin-bottom: 40px; border-left: 5px solid #500; padding-left: 20px; animation: glitch-text 0.3s infinite; }
    .menu-option { font-size: 1.8rem; margin: 10px 0; cursor: pointer; width: fit-content; transition: 0.1s; font-weight: bold; color: #ccc; }
    .menu-option:hover { color: #fff; text-shadow: 0 0 10px #fff; }
    .menu-option::before { content: ">> "; opacity: 0; }
    .menu-option:hover::before { opacity: 1; }
    .scanlines-menu { position: absolute; top:0; left:0; width:100%; height:100%; background: repeating-linear-gradient(0deg, rgba(0,0,0,0.3), rgba(0,0,0,0.3) 1px, transparent 2px, transparent 4px); pointer-events: none; z-index: 2001; }

    /* --- JOGO (AMBIENTE 3D) --- */
    #game-view { 
        display: none; width: 100vw; height: 100vh; position: relative; overflow: hidden; 
        perspective: 1000px; 
    }
    
    .vignette { position: absolute; top: 0; left: 0; width: 100%; height: 100%; box-shadow: inset 0 0 150px rgba(0,0,0,0.9); z-index: 25; pointer-events: none; }

    #office-layer { 
        position: absolute; top: 0; left: 0; 
        width: 120%; 
        height: 100%; 
        background-image: url('office_bg.png'); 
        background-size: cover; 
        background-position: center; 
        transition: transform 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94); 
    }
    
    /* PAINÉIS DE PORTA (Com Z-INDEX ajustado para receber clique) */
    .door-panel { 
        position: absolute; top: 35%; width: 70px; height: 200px; 
        background: linear-gradient(to right, #222, #111); 
        border: 2px solid #444; 
        border-radius: 5px;
        display: flex; flex-direction: column; justify-content: space-around; align-items: center; 
        z-index: 40; /* ALTO O SUFICIENTE PARA CLICAR */
        box-shadow: 0 0 20px #000;
        transition: transform 0.3s ease-out, opacity 0.3s;
        transform-style: preserve-3d;
        opacity: 0.8; 
    }

    /* Posições Iniciais (Meio escondidos) */
    .panel-left { 
        left: -10px; 
        border-left: none; 
        transform: rotateY(45deg) translateX(-30px); 
        transform-origin: left center;
    }
    .panel-right { 
        right: -10px; 
        border-right: none; 
        transform: rotateY(-45deg) translateX(30px);
        transform-origin: right center;
    }
    
    /* ATIVAÇÃO 3D */
    .panel-left.active-view {
        transform: rotateY(10deg) translateX(10px); 
        opacity: 1;
        left: 20px;
    }
    .panel-right.active-view {
        transform: rotateY(-10deg) translateX(-10px); 
        opacity: 1;
        right: 20px;
    }

    /* BOTÕES 3D */
    .btn { 
        width: 50px; height: 50px; border-radius: 50%; cursor: pointer; 
        border: 4px solid #111; 
        font-size: 10px; display: flex; align-items: center; justify-content: center; font-weight: bold; 
        transition: 0.1s; 
        box-shadow: 2px 2px 5px #000;
        position: relative;
        transform: translateZ(5px);
    }
    .btn:active { transform: translateZ(2px); box-shadow: 0 0 2px #000; }
    .btn-door { background: radial-gradient(circle, #f55, #900); color: white; text-shadow: 1px 1px 0 #000; }
    .btn-light { background: radial-gradient(circle, #fff, #aaa); color: black; }
    .btn-door.active { background: radial-gradient(circle, #5f5, #090); box-shadow: 0 0 20px #0f0; }
    .btn-light.active { background: radial-gradient(circle, #ff9, #cc0); box-shadow: 0 0 25px #ff0; }

    /* PORTAS INDUSTRIAIS */
    .heavy-door { 
        position: absolute; top: 0; width: 18%; height: 100%; 
        background: linear-gradient(90deg, #1a1a1a 0%, #2a2a2a 50%, #111 100%);
        border: 1px solid #000;
        transition: transform 0.2s cubic-bezier(0.4, 0.0, 0.2, 1); 
        z-index: 5;
        box-shadow: inset 0 0 50px #000;
        transform-origin: top center;
    }
    .heavy-door::after {
        content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 30px;
        background: repeating-linear-gradient(45deg, #aa0, #aa0 10px, #000 10px, #000 20px);
        border-top: 2px solid #000;
    }
    
    #door-l { left: 0; transform: translateY(-100%); border-right: 8px solid #080808; }
    #door-r { right: 0; transform: translateY(-100%); border-left: 8px solid #080808; }
    .closed { transform: translateY(0) !important; }

    .door-void { position: absolute; top: 0; width: 20%; height: 100%; background: black; opacity: 0.6; z-index: 4; transition: opacity 0.1s; }
    #void-l { left: 0; } #void-r { right: 0; }

    /* MONITOR FLIP */
    #monitor-trigger { 
        position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%); width: 400px; height: 60px; z-index: 100; cursor: pointer; transition: bottom 0.2s;
    }
    #monitor-trigger:hover { bottom: 0px; }
    #monitor-trigger img { width: 100%; height: 100%; object-fit: contain; }

    #cctv-layer { display: none; position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; background: #000; z-index: 50; border: 5px solid #333; }
    #cctv-feed { width: 100%; height: 100%; background-color: #111; background-size: cover; background-position: center; position: relative; }
    #paulao-cam-overlay { display: none; position: absolute; top: 20%; left: 30%; height: 60%; filter: grayscale(0.8) contrast(1.2); }
    .scanlines { position: absolute; top:0; left:0; width:100%; height:100%; background: repeating-linear-gradient(0deg, rgba(0,0,0,0.2), rgba(0,0,0,0.2) 1px, transparent 2px, transparent 4px); pointer-events: none; z-index: 55; }
    #white-bars-anim { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.15; z-index: 52; pointer-events: none; mix-blend-mode: screen; display: none; object-fit: cover; }

    #map-ui { position: absolute; bottom: 60px; right: 50px; width: 250px; height: 180px; background-image: url('map.png'); background-size: contain; background-repeat: no-repeat; background-position: center; z-index: 60; }
    .cam-btn { width: 45px; height: 25px; background: #222; color: #fff; border: 1px solid #555; position: absolute; cursor: pointer; font-size: 10px; opacity: 0.7; }
    .cam-btn:hover { opacity: 1; }
    .cam-btn.active { background: #0f0; color: black; animation: blink-btn 1s infinite; }
    
    #btn-1a { top: 10px; left: 90px; } #btn-1b { top: 50px; left: 50px; } #btn-2a { top: 90px; left: 90px; } #btn-3 { top: 50px; right: 40px; } #btn-4 { bottom: 20px; right: 80px; }

    #paulao-sprite { position: absolute; display: none; width: 300px; bottom: 0; z-index: 4; filter: brightness(0.2); transition: filter 0.1s; }
    .paulao-door-l { left: 12%; display: block !important; } .paulao-door-r { right: 12%; display: block !important; }

    #monitor-transition { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 200; object-fit: cover; pointer-events: none; }

    /* JUMPSCARE & GAME OVER */
    #paulao-attack { display: none; position: absolute; left: 0; bottom: 0; height: auto; max-width: 80vw; max-height: 100vh; background: transparent !important; border: none !important; box-shadow: none !important; z-index: 200; animation: foxy-shake 0.15s infinite; filter: contrast(1.5) brightness(0.8); pointer-events: none; }
    @keyframes foxy-shake { 0% { transform: translateX(0) scale(1); } 25% { transform: translateX(10px) scale(1.02); } 50% { transform: translateX(0px) scale(1.05); } 75% { transform: translateX(15px) scale(1.02); } 100% { transform: translateX(0) scale(1); } }
    @keyframes glitch-text { 0% { opacity: 1; transform: skewX(0deg); } 92% { opacity: 0.8; transform: skewX(20deg); } 96% { opacity: 0.8; transform: skewX(-20deg); } 100% { opacity: 1; } }
    @keyframes blink { 0% {opacity:1} 50% {opacity:0} 100% {opacity:1} }
    @keyframes blink-btn { 0% {background:#0f0} 50% {background:#050} 100% {background:#0f0} }

    #static-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url('https://media.giphy.com/media/oEI9uBYSzLpBK/giphy.gif'); background-size: cover; z-index: 300; opacity: 0.8; }
    #game-over-txt { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: red; font-size: 3rem; font-weight: bold; display: none; z-index: 301; }

    /* HUD E USAGE BAR */
    #hud { position: absolute; bottom: 20px; left: 20px; color: white; font-size: 1.2rem; z-index: 20; text-shadow: 1px 1px 0 #000; }
    #usage-container { margin-top: 5px; }
    #usage-img { height: 25px; display: block; }
</style>
</head>
<body>

<div id="main-menu">
    <div id="static-bg"></div>
    <div class="scanlines-menu"></div>
    <div id="menu-content">
        <div id="game-title">Five Nights<br>at Paulão</div>
        <div class="menu-option" onclick="startGame()">New Game</div>
        <div class="menu-option" onclick="playSound('blip')">Continue</div>
        <div class="menu-option" onclick="playSound('blip')">6th Night</div>
        <div class="menu-option" onclick="playSound('blip')">Custom Night</div>
        <div style="margin-top: 30px; font-size: 0.8rem; color: #555;">(C) 2025 Predo Games</div>
    </div>
    <img id="menu-paulao" src="paulo_menu1.png">
</div>

<img id="monitor-transition" src="">
<img id="paulao-attack" src="paulao_susto.png">
<div id="static-screen"></div>
<div id="game-over-txt">GAME OVER</div>

<div id="game-view">
    <div class="vignette"></div> 
    
    <div id="office-layer">
        <div id="void-l" class="door-void"></div>
        <div id="void-r" class="door-void"></div>
        <img id="paulao-sprite" src="paulao.png">
    </div>

    <div id="door-l" class="heavy-door"></div>
    <div id="door-r" class="heavy-door"></div>

    <div id="panel-l" class="door-panel panel-left">
        <div class="btn btn-door" onclick="toggleDoor('left', this)">DOOR</div>
        <div class="btn btn-light" onmousedown="light('left', true)" onmouseup="light('left', false)">LIGHT</div>
    </div>

    <div id="panel-r" class="door-panel panel-right">
        <div class="btn btn-door" onclick="toggleDoor('right', this)">DOOR</div>
        <div class="btn btn-light" onmousedown="light('right', true)" onmouseup="light('right', false)">LIGHT</div>
    </div>

    <div id="hud">
        <div id="power">Power left: <span id="power-val">100</span>%</div>
        <div id="usage-container">
            Usage: <br>
            <img id="usage-img" src="USAGE_BAR/1.png" alt="Usage Level">
        </div>
        <div style="position: fixed; top: 20px; right: 20px; font-size: 2rem;">12 AM <br> <span style="font-size:1rem">Night 1</span></div>
    </div>

    <div id="monitor-trigger" onclick="toggleMonitor()">
        <img src="0-FLIP.png" alt="Monitor Flip">
    </div>

    <div id="cctv-layer">
        <div class="scanlines"></div>
        <img id="white-bars-anim" src="WHITE_BARS/1.png">
        <div id="cctv-feed">
            <img id="paulao-cam-overlay" src="paulao.png">
        </div> 
        <div style="position: absolute; top: 30px; left: 30px; color: white; font-size: 1.5rem; animation: blink 1s infinite;">● REC</div>
        <div style="position: absolute; top: 30px; right: 30px; color: white; font-size: 1.5rem;" id="cam-name">CAM 1A</div>
        
        <div id="map-ui">
            <button id="btn-1a" class="cam-btn active" onclick="switchCam('1A')">CAM 1A</button>
            <button id="btn-1b" class="cam-btn" onclick="switchCam('1B')">CAM 1B</button>
            <button id="btn-2a" class="cam-btn" onclick="switchCam('2A')">CAM 2A</button>
            <button id="btn-3"  class="cam-btn" onclick="switchCam('3')">CAM 3</button>
            <button id="btn-4"  class="cam-btn" onclick="switchCam('4')">CAM 4</button>
        </div>
    </div>
</div>

<script>
    const audioFiles = {
        menu_static: 'audio/static2.wav',
        blip: 'audio/blip3.wav',
        fan: 'audio/Buzz_Fan_Florescent2.wav',
        ambience: 'audio/ambience2.wav',
        door: 'audio/OVEN-DRA_1_GEN-HDF18119.wav',
        light_hum: 'audio/BallastHumMedium2.wav',
        monitor_open: 'audio/CAMERA_VIDEO_LOA_60105303.wav',
        monitor_close: 'audio/put down.wav',
        run: 'audio/running fast3.wav',
        bang: 'audio/DOOR_POUNDING_ME_D0291401.wav',
        step: 'audio/deep steps.wav',
        powerdown: 'audio/powerdown.wav',
        darkness: 'audio/darkness music.wav',
        scream: 'audio/XSCREAM.wav',
        win: 'audio/chimes 2.wav'
    };

    const loops = {
        menu: new Audio(audioFiles.menu_static),
        fan: new Audio(audioFiles.fan),
        ambience: new Audio(audioFiles.ambience),
        light: new Audio(audioFiles.light_hum)
    };

    loops.menu.loop = true;
    loops.fan.loop = true;
    loops.ambience.loop = true;
    loops.light.loop = true;
    loops.menu.volume = 0.3; 

    function playSound(key) {
        if(audioFiles[key]) {
            const sfx = new Audio(audioFiles[key]);
            sfx.volume = 0.8;
            sfx.play().catch(e => {}); 
        }
    }

    const state = {
        power: 100,
        doorL: false, doorR: false,
        lightL: false, lightR: false,
        cameraActive: false,
        currentCam: '1A',
        paulaoLocation: '1A', 
        gameOver: false
    };

    const camImages = {
        '1A': 'cam1.jpg',
        '1B': 'cam2.jpg',
        '2A': 'cam2.jpg',
        '3':  'cam3.png',
        '4':  'cam4.jpg'
    };

    let aiTimer = null;
    let powerTimer = null;
    let menuGlitchTimer = null; 
    let isTransitioning = false;
    let whiteBarsInterval = null; 

    document.addEventListener('click', () => {
        if(document.getElementById('main-menu').style.display !== 'none') {
            loops.menu.play().catch(()=>{});
        }
    }, {once:true});

    // --- LÓGICA DE MOVIMENTO PANORÂMICO E GATILHOS 3D ---
    const officeLayer = document.getElementById('office-layer');
    
    document.addEventListener('mousemove', (e) => {
        if(document.getElementById('game-view').style.display !== 'block') return;
        if(state.cameraActive || state.gameOver) return;
        
        let width = window.innerWidth;
        let mouseX = e.clientX;
        let percent = mouseX / width;
        let moveX = percent * 10; 
        
        // Move o fundo
        officeLayer.style.transform = `translateX(-${moveX}%)`;

        // LÓGICA DOS "3 RETÂNGULOS VIRTUAIS"
        // < 15% da tela = Esquerda
        if (percent < 0.15) {
            document.getElementById('panel-l').classList.add('active-view');
        } else {
            document.getElementById('panel-l').classList.remove('active-view');
        }

        // > 85% da tela = Direita
        if (percent > 0.85) {
            document.getElementById('panel-r').classList.add('active-view');
        } else {
            document.getElementById('panel-r').classList.remove('active-view');
        }
    });

    function menuGlitchLoop() {
        if(document.getElementById('game-view').style.display === 'block') return; 
        let timeToNext = Math.random() * 30000 + 1000;
        menuGlitchTimer = setTimeout(() => {
            const img = document.getElementById('menu-paulao');
            img.src = 'paulo_menu2.png'; 
            setTimeout(() => {
                img.src = 'paulo_menu1.png'; 
                menuGlitchLoop();
            }, Math.random() * 170 + 50);
        }, timeToNext);
    }
    menuGlitchLoop();

    function startGame() {
        playSound('blip');
        loops.menu.pause(); 
        document.getElementById('main-menu').style.display = 'none';
        clearTimeout(menuGlitchTimer);
        document.getElementById('game-view').style.display = 'block';
        loops.fan.play();
        loops.ambience.play();
        startLoops();
    }

    function startLoops() {
        powerTimer = setInterval(() => {
            if(state.gameOver) return;
            let drain = updateUsage() * 0.2; 
            state.power -= drain;
            if(state.power < 0) state.power = 0;
            document.getElementById('power-val').innerText = Math.floor(state.power);
            if(state.power <= 0) blackout();
        }, 1000);

        aiTimer = setInterval(() => {
            if(state.gameOver || state.power <= 0) return;
            if(Math.random() * 20 < 10) { 
                movePaulao();
            }
        }, 3500);
    }

    function toggleDoor(side, btn) {
        if(state.power <= 0 || state.gameOver) {
            playSound('blip'); 
            return;
        }
        playSound('door'); 
        let door = document.getElementById(side === 'left' ? 'door-l' : 'door-r');
        if(side === 'left') {
            state.doorL = !state.doorL;
            door.classList.toggle('closed');
        } else {
            state.doorR = !state.doorR;
            door.classList.toggle('closed');
        }
        btn.classList.toggle('active');
        updateUsage();
    }

    function light(side, on) {
        if(state.power <= 0 || state.gameOver) return;
        const voidArea = document.getElementById(side === 'left' ? 'void-l' : 'void-r');
        const paulaoSprite = document.getElementById('paulao-sprite');
        
        if (on) {
            loops.light.currentTime = 0;
            loops.light.play(); 
            voidArea.style.opacity = '0'; 
            if (side === 'left' && state.paulaoLocation === 'DoorL') {
                paulaoSprite.className = 'paulao-door-l';
                paulaoSprite.style.filter = 'brightness(1)'; 
                playSound('windowscare'); 
            } else if (side === 'right' && state.paulaoLocation === 'DoorR') {
                paulaoSprite.className = 'paulao-door-r';
                paulaoSprite.style.filter = 'brightness(1)';
                playSound('windowscare');
            } else {
                paulaoSprite.className = ''; 
            }
        } else {
            loops.light.pause(); 
            voidArea.style.opacity = '0.6'; 
            paulaoSprite.className = ''; 
            paulaoSprite.style.filter = 'brightness(0.2)';
        }
        updateUsage();
    }

    function toggleMonitor() {
        if(state.power <= 0 || state.gameOver || isTransitioning) return;

        isTransitioning = true;
        const transImg = document.getElementById('monitor-transition');
        const cctv = document.getElementById('cctv-layer');

        let isOpening = !state.cameraActive;
        let frame = isOpening ? 1 : 11;
        const step = isOpening ? 1 : -1;
        
        if(isOpening) playSound('monitor_open');
        else playSound('monitor_close');

        transImg.style.display = 'block';
        transImg.src = `camera_transition/${frame}.png`;

        if (!isOpening) {
            cctv.style.display = 'none';
            stopWhiteBars();
        }

        const animInterval = setInterval(() => {
            frame += step;
            transImg.src = `camera_transition/${frame}.png`;

            if ((isOpening && frame > 11) || (!isOpening && frame < 1)) {
                clearInterval(animInterval);
                isTransitioning = false;
                transImg.style.display = 'none';
                
                state.cameraActive = !state.cameraActive;
                
                if (state.cameraActive) {
                    cctv.style.display = 'block';
                    switchCam(state.currentCam);
                    startWhiteBars();
                } 
                updateUsage();
            }
        }, 25);
    }

    function startWhiteBars() {
        const whiteBarsImg = document.getElementById('white-bars-anim');
        whiteBarsImg.style.display = 'block';
        let barFrame = 1;
        if(whiteBarsInterval) clearInterval(whiteBarsInterval);
        whiteBarsInterval = setInterval(() => {
            whiteBarsImg.src = `WHITE_BARS/${barFrame}.png`;
            barFrame++;
            if(barFrame > 7) barFrame = 1;
        }, 50); 
    }

    function stopWhiteBars() {
        if(whiteBarsInterval) {
            clearInterval(whiteBarsInterval);
            whiteBarsInterval = null;
        }
        document.getElementById('white-bars-anim').style.display = 'none';
    }

    function switchCam(camID) {
        state.currentCam = camID;
        document.getElementById('cam-name').innerText = "CAM " + camID;
        playSound('blip'); 

        const feed = document.getElementById('cctv-feed');
        let bgImage = camImages[camID] ? camImages[camID] : 'cam1.jpg';
        feed.style.backgroundImage = `url('${bgImage}')`;

        const overlay = document.getElementById('paulao-cam-overlay');
        if(state.paulaoLocation === camID) {
            overlay.style.display = 'block';
            if(camID === '1A') overlay.style.left = '30%'; 
            else if(camID === '3') overlay.style.left = '60%'; 
            else overlay.style.left = '40%';
        } else {
            overlay.style.display = 'none';
        }

        document.querySelectorAll('.cam-btn').forEach(b => b.classList.remove('active'));
        let btnId = "btn-" + camID.toLowerCase();
        let btn = document.getElementById(btnId);
        if(btn) btn.classList.add('active');
    }

    function updateUsage() {
        let usage = 1; 
        if(state.doorL) usage++;
        if(state.doorR) usage++;
        if(state.cameraActive) usage++;
        
        if(usage > 5) usage = 5;
        if(usage < 1) usage = 1;

        const usageImg = document.getElementById('usage-img');
        if(usageImg) usageImg.src = `USAGE_BAR/${usage}.png`;

        return usage;
    }

    function movePaulao() {
        const path = ['1A', '1B', '3', '4', '2A', 'DoorL', 'Office'];
        let currentIndex = path.indexOf(state.paulaoLocation);

        if(currentIndex === -1) currentIndex = 0;
        let nextLoc = path[currentIndex + 1];

        playSound('step');

        if (nextLoc === 'Office') {
            playSound('run');
            setTimeout(() => {
                if(state.doorL) {
                    console.log("Paulão bateu na porta!");
                    playSound('bang'); 
                    state.paulaoLocation = '1A'; 
                } else {
                    state.paulaoLocation = 'Office';
                    triggerJumpscare();
                }
            }, 2000); 
        } else {
            state.paulaoLocation = nextLoc;
        }
        if(state.cameraActive) switchCam(state.currentCam);
    }

    function blackout() {
        state.doorL = false; state.doorR = false;
        state.cameraActive = false;
        loops.fan.pause();
        loops.ambience.pause();
        playSound('powerdown'); 
        stopWhiteBars();

        document.getElementById('cctv-layer').style.display = 'none';
        document.getElementById('office-layer').style.backgroundImage = 'none';
        document.getElementById('office-layer').style.backgroundColor = '#000'; 
        document.getElementById('hud').style.display = 'none';
        
        setTimeout(() => {
            playSound('darkness');
        }, 1000);

        setTimeout(triggerJumpscare, 8000);
    }

    function triggerJumpscare() {
        if(state.gameOver) return;
        state.gameOver = true;
        
        clearInterval(powerTimer);
        clearInterval(aiTimer);
        loops.fan.pause();
        loops.ambience.pause();
        stopWhiteBars();

        document.getElementById('cctv-layer').style.display = 'none';
        
        playSound('scream'); 

        const attackImg = document.getElementById('paulao-attack');
        attackImg.style.display = 'block';

        setTimeout(() => {
            attackImg.style.display = 'none';
            document.getElementById('static-screen').style.display = 'block';
            document.getElementById('game-over-txt').style.display = 'block';
            playSound('menu_static'); 
        }, 3000);
        
        setTimeout(() => {
            location.reload();
        }, 8000);
    }

</script>
</body>
</html>